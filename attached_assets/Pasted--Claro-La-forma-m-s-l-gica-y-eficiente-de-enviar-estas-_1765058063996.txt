¬°Claro! La forma m√°s l√≥gica y eficiente de enviar estas instrucciones al equipo de Replit es en el orden en que se necesitan los componentes: **primero la herramienta de captura de enlaces (Iframe/Fallback)** y luego el **procesador de enlaces (Modal de A√±adir R√°pido)**.

Aqu√≠ tienes la secuencia exacta y las instrucciones consolidadas, listas para copiar y pegar:

---

# üöÄ PROMPT MAESTRO FINAL: FLUJO DE CAPTURA Y CONVERSI√ìN DE ENLACES

**ROL:** Senior UX Architect & Frontend Engineer.
**OBJETIVO:** Implementar el flujo de captura de enlaces de producto sin fricci√≥n, incluyendo la robustez del *fallback* y el modal de adici√≥n r√°pida.

## 1. üåê FASE 1: NAVEGACI√ìN Y CAPTURA DE ENLACES (IFRAME Y FALLBACK)

El equipo debe crear el componente modal grande que se activa al hacer clic en cualquier logo de tienda.

### A. Componente `StoreIframeModal`
* **Dise√±o:** Crear un modal grande que ocupe **aprox. el 90% del *viewport***.
* **Elemento Principal:** Debe contener el `<iframe>` que intentar√° cargar la tienda externa.
* **Bot√≥n de Acci√≥n:** En el encabezado del modal (fuera del iframe), incluir el bot√≥n que activa la Fase 2:
    * **Texto:** `‚ú® A√±adir Producto a Lista`

### B. L√≥gica de Fallback (M√°xima Prioridad)
Implementar la l√≥gica de seguridad para manejar los errores de carga:

* **Instrucci√≥n Clave:** Si el `<iframe>` no puede cargar la URL de la tienda (debido a `X-Frame-Options` o `CSP`, com√∫n en Amazon/Walmart), el sistema debe **autom√°ticamente** cerrar el modal y abrir la URL de la tienda en una **nueva pesta√±a** (`target="_blank"`).
* **Funci√≥n del Bot√≥n:** El bot√≥n `‚ú® A√±adir Producto a Lista` debe ser el punto de activaci√≥n que **inicia la Fase 2**.

## 2. ‚ûï FASE 2: EL MODAL DE ADICI√ìN R√ÅPIDA (`QuickAddModal`)

Este componente se activa al hacer clic en el bot√≥n de la Fase 1. Su objetivo es convertir la URL copiada en una acci√≥n de Givlyn.

### A. Estructura del Modal
* **Dise√±o:** Un modal m√°s peque√±o que se superpone a la pantalla o a la nueva pesta√±a.
* **Campo de Entrada:** Debe haber un campo de texto visible para que el usuario **pegue la URL del producto** copiada de la tienda.

### B. Funcionalidad de Adici√≥n (Un Solo Clic)
El modal debe tener dos opciones mutuamente excluyentes para seleccionar el destino:

1.  **Selector de Lista Existente:** Implementar un **dropdown/selector** que muestre todas las `listas_del_usuario` existentes para una selecci√≥n r√°pida.
2.  **Creaci√≥n R√°pida de Lista:** Incluir un bot√≥n o un campo que, al activarse, permita al usuario **nombrar y crear una nueva lista** al mismo tiempo que a√±ade el producto.

### C. Flujo de Datos (Integraci√≥n Backend)
Al confirmar la adici√≥n:
1.  El sistema debe tomar la URL pegada.
2.  Ejecutar la funci√≥n **`itemService.convertToAffiliateLink(url)`** (utilizando el mock data por ahora, pero preparado para la API real).
3.  Almacenar los datos del producto y la URL de afiliado en la lista elegida.
4.  Mostrar una notificaci√≥n de √©xito.

---

**Resumen de la Secuencia:**
**1.** Click en Logo de Tienda $\rightarrow$ **2.** Se abre el Iframe/Nueva Pesta√±a $\rightarrow$ **3.** Usuario copia el link $\rightarrow$ **4.** Click en `‚ú® A√±adir Producto a Lista` $\rightarrow$ **5.** Se abre el **`QuickAddModal`** (Fase 2) $\rightarrow$ **6.** Producto a√±adido.